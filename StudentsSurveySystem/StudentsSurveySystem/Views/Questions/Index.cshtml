@model IEnumerable<StudentsSurveySystem.Models.Question>

@{
    ViewBag.Title = "Index";
}
<style>
    .sendBtn:hover{
        background-color: green;
    }
    #statsbtn{
        background-color:white;
    }
    #statsbtn:hover{
        background-color:green;
    }
    .message:hover{
        opacity:0.5;
    }
</style>

<h2>@ViewBag.SurveyName</h2>
@using (Html.BeginForm("Index", "Questions", new {  }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    <input type="hidden" name="surveyID" value="@ViewBag.SurveyID" />
    <table class="table">
        <thead>
            <tr>
                <th>Въпрос</th>
                @if (this.User.IsInRole("Admin") == false)
                {
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th></th>
                }
            </tr>
        </thead>
        <tbody>
@foreach (var item in Model)
{
    
        <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Content)
                </td>
                @if (this.User.IsInRole("Admin") == false)
                    {
                    <td>
                        <input checked="checked"
                               id="ChosenAnswer"
                               name="@item.ID"
                               type="radio"
                               value="A" />
                    </td>
                    <td>
                        <input id="ChosenAnswer"
                               name="@item.ID"
                               type="radio"
                               value="B" />
                    </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="C" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="D" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="E" />
                        </td>
                }

                @if (this.User.IsInRole("Admin"))
                {
                    <td>
                        <span class="btn btn-default" id="statsbtn">@Html.ActionLink("Статистика", "Stats", new { questionID = item.ID })</span>
                    </td>
                }
</tr>
        }
</tbody>
    </table>

    if(ViewBag.CanEnroll == false)
    {
        <div class="alert alert-danger message"><strong> Вече сте попълнили тази анкета</strong></div>
        <input type="submit" value="Изпрати" class="btn btn-default" disabled/>
        <input type="submit" value="Обратно към анкети" class="btn btn-default go_back sendBtn" />
    }
    else
    {
        if (this.User.IsInRole("Admin") == false)
        {
            <input type="submit" value="Изпрати" class="btn btn-default sendBtn" onclick="return confirm('Сигурни ли сте, че искате да изпратите тази анкета?');return false;" />
        }
    }
}

<script type="text/javascript">
    $(function () {
        $('.go_back').click(function (e) {
            e.preventDefault();
            history.go(-1);
        });
    });
</script>