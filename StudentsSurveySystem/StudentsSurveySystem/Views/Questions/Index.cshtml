@model IEnumerable<StudentsSurveySystem.Models.Question>

@{
    ViewBag.Title = "Index";
}

<h2>@ViewBag.SurveyName</h2>
@using (Html.BeginForm("Index", "Questions", new {  }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    <input type="hidden" name="surveyID" value="@ViewBag.SurveyID" />
    <table class="table">
        <thead>
            <tr>
                <th>Въпрос</th>
                @if (this.User.IsInRole("Admin") == false)
                {
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th></th>
                }
            </tr>
        </thead>
        <tbody>
@foreach (var item in Model)
{
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Content)
                </td>
                    @if (this.User.IsInRole("Admin") == false)
                    {
                        <td>
                            <input checked="checked"
                                   id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="A" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="B" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="C" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="D" />
                        </td>
                        <td>
                            <input id="ChosenAnswer"
                                   name="@item.ID"
                                   type="radio"
                                   value="E" />
                        </td>
                    }

                    @if (this.User.IsInRole("Admin")) {
                        <td>
                            @Html.ActionLink("Stats", "Stats", new { questionID = item.ID})
                        </td>
                    }
            </tr>
}
        </tbody>
    </table>

    if(ViewBag.CanEnroll == false)
    {
        <p>Вече сте попълнили тази анкета</p>
        <input type="submit" value="Изпрати" class="btn btn-default" disabled/>
    }
    else
    {
        if (this.User.IsInRole("Admin") == false)
        {
            <input type="submit" value="Изпрати" class="btn btn-default" onclick="return confirm('Сигурни ли сте, че искате да изпратите тази анкета?');return false;" />
        }
    }
}
